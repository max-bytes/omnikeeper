{
	cis: [?document == 'setup_facts.json'] | [0].data.ansible_facts.[
		{
			tempID: ciid(),
			idMethod: {
				method: 'byData',
				attributes: ['fqdn']
			},
			attributes: [
				ansible_fqdn.{name: 'fqdn', value:store('fqdn', @), type:'Text'},
				ansible_architecture.{name: 'os_family', value:@, type:'Text'},
				ansible_cmdline.{name: 'ansible.inventory.cmdline', value:@, type:'JSON'}
			]
		},
		ansible_mounts[].{
			tempID: ciid('ansible_mounts', idx('ansible_mounts')),
			idMethod: {
				method: 'byData',
				attributes: ['__name', 'device', 'mount']
			},
			attributes: [
				{name: '__name', value: join(':', [retrieve('fqdn'), mount]), type:'Text'},
				{name: 'device', value: device, type:'Text'},
				{name: 'mount', value: mount, type:'Text'}
			]
		}
	] | [],
	relations: [
		map(&{from: ciid(), predicate: 'has_mounted_device', to: ciid('ansible_mounts', idx('ansible_mounts_redo'))}, [?document == 'setup_facts.json'] | [0].data.ansible_facts.ansible_mounts[])
	] | []
}